<!DOCTYPE html>
<html lang="en"><!-- Mirrored from www.slimframework.com/docs/objects/router.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 21 Sep 2016 20:42:43 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport"/>
        <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
        <title>Router - Slim Framework</title>
        <meta content="" name="description"/>
        <meta content="index, follow" name="robots"/>
        <meta content="Router" property="og:title"/>
        <meta content="Slim Framework" property="og:site_name"/>
        <meta content="router.html" property="og:url"/>
        <meta content="" property="og:description"/>
        <meta content="website" property="og:type"/>
        <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
        <link href="../../assets/css/all.css" rel="stylesheet"/>
        <link href="../../assets/images/favicon.png" rel="shortcut icon"/>
        <link href="../../../maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet"/>
        
        
        
    </head>
    <body style="padding-top: 5em">
        

<div class="wrapper docs">
    <div class="container-fluid">
        

        <div class="row">
            

            <div class="col-md-8 docs-content">
                <h1 class="page-header"><a class="dashAnchor" name="//apple_ref/cpp/Section/Router"></a>Router</h1>
                <div class="edit-panel" style="margin: 0 0 1em 0;">
                    <a class="btn btn-default btn-xs" href="https://github.com/slimphp/Slim-Website/tree/gh-pages/docs/objects/router.md" target="_blank"><i class="fa fa-github"></i> Edit This Page</a>
                </div>
                <p>The Slim Framework’s router is built on top of the <a href="https://github.com/nikic/FastRoute">nikic/fastroute</a> component, and it is remarkably fast and stable.</p>

<h2 id="how-to-create-routes"><a class="dashAnchor" name="//apple_ref/cpp/Section/How%20to%20create%20routes"></a>How to create routes</h2>

<p>You can define application routes using proxy methods on the <code class="highlighter-rouge">\Slim\App</code> instance. The Slim Framework provides methods for the most popular HTTP methods.</p>

<h3 id="get-route"><a class="dashAnchor" name="//apple_ref/cpp/Section/GET%20Route"></a>GET Route</h3>

<p>You can add a route that handles only <code class="highlighter-rouge">GET</code> HTTP requests with the Slim
application’s <code class="highlighter-rouge">get()</code> method. It accepts two arguments:</p>

<ol>
  <li>The route pattern (with optional named placeholders)</li>
  <li>The route callback</li>
</ol>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app = new \Slim\App();
$app-&gt;get('/books/{id}', function ($request, $response, $args) {
    // Show book identified by $args['id']
});</code></pre></figure>

<h3 id="post-route"><a class="dashAnchor" name="//apple_ref/cpp/Section/POST%20Route"></a>POST Route</h3>

<p>You can add a route that handles only <code class="highlighter-rouge">POST</code> HTTP requests with the Slim
application’s <code class="highlighter-rouge">post()</code> method. It accepts two arguments:</p>

<ol>
  <li>The route pattern (with optional named placeholders)</li>
  <li>The route callback</li>
</ol>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app = new \Slim\App();
$app-&gt;post('/books', function ($request, $response, $args) {
    // Create new book
});</code></pre></figure>

<h3 id="put-route"><a class="dashAnchor" name="//apple_ref/cpp/Section/PUT%20Route"></a>PUT Route</h3>

<p>You can add a route that handles only <code class="highlighter-rouge">PUT</code> HTTP requests with the Slim
application’s <code class="highlighter-rouge">put()</code> method. It accepts two arguments:</p>

<ol>
  <li>The route pattern (with optional named placeholders)</li>
  <li>The route callback</li>
</ol>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app = new \Slim\App();
$app-&gt;put('/books/{id}', function ($request, $response, $args) {
    // Update book identified by $args['id']
});</code></pre></figure>

<h3 id="delete-route"><a class="dashAnchor" name="//apple_ref/cpp/Section/DELETE%20Route"></a>DELETE Route</h3>

<p>You can add a route that handles only <code class="highlighter-rouge">DELETE</code> HTTP requests with the Slim
application’s <code class="highlighter-rouge">delete()</code> method. It accepts two arguments:</p>

<ol>
  <li>The route pattern (with optional named placeholders)</li>
  <li>The route callback</li>
</ol>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app = new \Slim\App();
$app-&gt;delete('/books/{id}', function ($request, $response, $args) {
    // Delete book identified by $args['id']
});</code></pre></figure>

<h3 id="options-route"><a class="dashAnchor" name="//apple_ref/cpp/Section/OPTIONS%20Route"></a>OPTIONS Route</h3>

<p>You can add a route that handles only <code class="highlighter-rouge">OPTIONS</code> HTTP requests with the Slim
application’s <code class="highlighter-rouge">options()</code> method. It accepts two arguments:</p>

<ol>
  <li>The route pattern (with optional named placeholders)</li>
  <li>The route callback</li>
</ol>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app = new \Slim\App();
$app-&gt;options('/books/{id}', function ($request, $response, $args) {
    // Return response headers
});</code></pre></figure>

<h3 id="patch-route"><a class="dashAnchor" name="//apple_ref/cpp/Section/PATCH%20Route"></a>PATCH Route</h3>

<p>You can add a route that handles only <code class="highlighter-rouge">PATCH</code> HTTP requests with the Slim
application’s <code class="highlighter-rouge">patch()</code> method. It accepts two arguments:</p>

<ol>
  <li>The route pattern (with optional named placeholders)</li>
  <li>The route callback</li>
</ol>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app = new \Slim\App();
$app-&gt;patch('/books/{id}', function ($request, $response, $args) {
    // Apply changes to book identified by $args['id']
});</code></pre></figure>

<h3 id="any-route"><a class="dashAnchor" name="//apple_ref/cpp/Section/Any%20Route"></a>Any Route</h3>

<p>You can add a route that handles all HTTP request methods with the Slim application’s <code class="highlighter-rouge">any()</code> method. It accepts two arguments:</p>

<ol>
  <li>The route pattern (with optional named placeholders)</li>
  <li>The route callback</li>
</ol>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app = new \Slim\App();
$app-&gt;any('/books/[{id}]', function ($request, $response, $args) {
    // Apply changes to books or book identified by $args['id'] if specified.
    // To check which method is used: $request-&gt;getMethod();
});</code></pre></figure>

<p>Note that the second parameter is a callback. You could specify a Class (which need a <code class="highlighter-rouge">__invoke()</code> implementation) instead of a Closure. You can then do the mapping somewhere else:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app-&gt;any('/user', 'MyRestfulController');</code></pre></figure>

<h3 id="custom-route"><a class="dashAnchor" name="//apple_ref/cpp/Section/Custom%20Route"></a>Custom Route</h3>

<p>You can add a route that handles multiple HTTP request methods with the Slim application’s <code class="highlighter-rouge">map()</code> method. It accepts three arguments:</p>

<ol>
  <li>Array of HTTP methods</li>
  <li>The route pattern (with optional named placeholders)</li>
  <li>The route callback</li>
</ol>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app = new \Slim\App();
$app-&gt;map(['GET', 'POST'], '/books', function ($request, $response, $args) {
    // Create new book or list all books
});</code></pre></figure>

<h2 id="route-callbacks"><a class="dashAnchor" name="//apple_ref/cpp/Section/Route%20callbacks"></a>Route callbacks</h2>

<p>Each routing method described above accepts a callback routine as its final argument. This argument can be any PHP callable, and by default it accepts three arguments.</p>

<dl>
  <dt><strong>Request</strong></dt>
  <dd>The first argument is a <code class="highlighter-rouge">Psr\Http\Message\ServerRequestInterface</code> object that represents the current HTTP request.</dd>
  <dt><strong>Response</strong></dt>
  <dd>The second argument is a <code class="highlighter-rouge">Psr\Http\Message\ResponseInterface</code> object that represents the current HTTP response.</dd>
  <dt><strong>Arguments</strong></dt>
  <dd>The third argument is an associative array that contains values for the current route’s named placeholders.</dd>
</dl>

<h3 id="writing-content-to-the-response"><a class="dashAnchor" name="//apple_ref/cpp/Section/Writing%20content%20to%20the%20response"></a>Writing content to the response</h3>

<p>There are two ways you can write content to the HTTP response. First, you can simply <code class="highlighter-rouge">echo()</code> content from the route callback. This content will be appended to the current HTTP response object. Second, you can return a <code class="highlighter-rouge">Psr\Http\Message\ResponseInterface</code> object.</p>

<h3 id="closure-binding"><a class="dashAnchor" name="//apple_ref/cpp/Section/Closure%20binding"></a>Closure binding</h3>

<p>If you use a <code class="highlighter-rouge">Closure</code> instance as the route callback, the closure’s state is bound to the <code class="highlighter-rouge">Container</code> instance. This means you will have access to the DI container instance <em>inside</em> of the Closure via the <code class="highlighter-rouge">$this</code> keyword:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app = new \Slim\App();
$app-&gt;get('/hello/{name}', function ($request, $response, $args) {
    // Use app HTTP cookie service
    $this-&gt;get('cookies')-&gt;set('name', [
        'value' =&gt; $args['name'],
        'expires' =&gt; '7 days'
    ]);
});</code></pre></figure>

<h2 id="route-strategies"><a class="dashAnchor" name="//apple_ref/cpp/Section/Route%20strategies"></a>Route strategies</h2>

<p>The route callback signature is determined by a route strategy. By default, Slim expects route callbacks to accept the request, response, and an array of route placeholder arguments. This is called the RequestResponse strategy. However, you can change the expected route callback signature by simply using a different strategy. As an example, Slim provides an alternative strategy called RequestResponseArgs that accepts request and response, plus each route placeholder as a separate argument. Here is an example of using this alternative strategy; simply replace the <code class="highlighter-rouge">foundHandler</code> dependency provided by the default <code class="highlighter-rouge">\Slim\Container</code>:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$c = new \Slim\Container();
$c['foundHandler'] = function() {
    return new \Slim\Handlers\Strategies\RequestResponseArgs();
};

$app = new \Slim\App($c);
$app-&gt;get('/hello/{name}', function ($request, $response, $name) {
    return $response-&gt;write($name);
});</code></pre></figure>

<p>You can provide your own route strategy by implementing the <code class="highlighter-rouge">\Slim\Interfaces\InvocationStrategyInterface</code>.</p>

<h2 id="route-placeholders"><a class="dashAnchor" name="//apple_ref/cpp/Section/Route%20placeholders"></a>Route placeholders</h2>

<p>Each routing method described above accepts a URL pattern that is matched against the current HTTP request URI. Route patterns may use named placeholders to dynamically match HTTP request URI segments.</p>

<h3 id="format"><a class="dashAnchor" name="//apple_ref/cpp/Section/Format"></a>Format</h3>

<p>A route pattern placeholder starts with a <code class="highlighter-rouge"><span class="p">{</span></code>, followed by the placeholder name, ending with a <code class="highlighter-rouge">}</code>. This is an example placeholder named <code class="highlighter-rouge">name</code>:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app = new \Slim\App();
$app-&gt;get('/hello/{name}', function ($request, $response, $args) {
    echo "Hello, " . $args['name'];
});</code></pre></figure>

<h3 id="optional-segments"><a class="dashAnchor" name="//apple_ref/cpp/Section/Optional%20segments"></a>Optional segments</h3>

<p>To make a section optional, simply wrap in square brackets:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app-&gt;get('/users[/{id}]', function ($request, $response, $args) {
    // reponds to both `/users` and `/users/123`
    // but not to `/users/`
});</code></pre></figure>

<p>Multiple optional parameters are supported by nesting:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app-&gt;get('/news[/{year}[/{month}]]', function ($request, $response, $args) {
    // reponds to `/news`, `/news/2016` and `/news/2016/03`
});</code></pre></figure>

<p>For “Unlimited” optional parameters, you can do this:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app-&gt;get('/news[/{params:.*}]', function ($request, $response, $args) {
    $params = explode('/', $request-&gt;getAttribute('params'));

    // $params is an array of all the optional segments
});</code></pre></figure>

<p>In this example, a URI of <code class="highlighter-rouge">/news/2016/03/20</code> would result in the <code class="highlighter-rouge">$params</code> array
containing three elements: <code class="highlighter-rouge">['2016', '03', '20']</code>.</p>

<h3 id="regular-expression-matching"><a class="dashAnchor" name="//apple_ref/cpp/Section/Regular%20expression%20matching"></a>Regular expression matching</h3>

<p>By default the placeholders are written inside <code class="highlighter-rouge"><span class="p">{}</span></code> and can accept any
values. However, placeholders can also require the HTTP request URI to match a particular regular expression. If the current HTTP request URI does not match a placeholder regular expression, the route is not invoked. This is an example placeholder named <code class="highlighter-rouge">id</code> that requires one or more digits.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app = new \Slim\App();
$app-&gt;get('/users/{id:[0-9]+}', function ($request, $response, $args) {
    // Find user identified by $args['id']
});</code></pre></figure>

<h2 id="route-names"><a class="dashAnchor" name="//apple_ref/cpp/Section/Route%20names"></a>Route names</h2>

<p>Application routes can be assigned a name. This is useful if you want to programmatically generate a URL to a specific route with the router’s <code class="highlighter-rouge">pathFor()</code> method. Each routing method described above returns a <code class="highlighter-rouge">\Slim\Route</code> object, and this object exposes a <code class="highlighter-rouge">setName()</code> method.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app = new \Slim\App();
$app-&gt;get('/hello/{name}', function ($request, $response, $args) {
    echo "Hello, " . $args['name'];
})-&gt;setName('hello');</code></pre></figure>

<p>You can generate a URL for this named route with the application router’s <code class="highlighter-rouge">pathFor()</code>  method.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">echo $app-&gt;getContainer()-&gt;get('router')-&gt;pathFor('hello', [
    'name' =&gt; 'Josh'
]);
// Outputs "/hello/Josh"</code></pre></figure>

<p>The router’s <code class="highlighter-rouge">pathFor()</code> method accepts two arguments:</p>

<ol>
  <li>The route name</li>
  <li>Associative array of route pattern placeholders and replacement values</li>
</ol>

<h2 id="route-groups"><a class="dashAnchor" name="//apple_ref/cpp/Section/Route%20groups"></a>Route groups</h2>

<p>To help organize routes into logical groups, the <code class="highlighter-rouge">\Slim\App</code> also provides a <code class="highlighter-rouge">group()</code> method. Each group’s route pattern is prepended to the routes or groups contained within it, and any placeholder arguments in the group pattern are ultimately made available to the nested routes:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app = new \Slim\App();
$app-&gt;group('/users/{id:[0-9]+}', function () {
    $this-&gt;map(['GET', 'DELETE', 'PATCH', 'PUT'], '', function ($request, $response, $args) {
        // Find, delete, patch or replace user identified by $args['id']
    })-&gt;setName('user');
    $this-&gt;get('/reset-password', function ($request, $response, $args) {
        // Route for /users/{id:[0-9]+}/reset-password
        // Reset the password for user identified by $args['id']
    })-&gt;setName('user-password-reset');
});</code></pre></figure>

<p>Note inside the group closure, <code class="highlighter-rouge">$this</code> is used instead of <code class="highlighter-rouge">$app</code>. Slim binds the closure to the application instance for you, just like it is the case with route callback binds with container instance.</p>

<ul>
  <li>inside group closure, <code class="highlighter-rouge">$this</code> is bound to the instance of <code class="highlighter-rouge">Slim\App</code></li>
  <li>inside route closure, <code class="highlighter-rouge">$this</code> is bound to the instance of <code class="highlighter-rouge">Slim\Container</code></li>
</ul>

<h2 id="route-middleware"><a class="dashAnchor" name="//apple_ref/cpp/Section/Route%20middleware"></a>Route middleware</h2>

<p>You can also attach middleware to any route or route group. <a href="../concepts/middleware.html">Learn more</a>.</p>

<h2 id="router-caching"><a class="dashAnchor" name="//apple_ref/cpp/Section/Router%20caching"></a>Router caching</h2>

<p>It’s possible to enable router cache by setting valid filename in default Slim settings. <a href="application.html#slim-default-settings">Learn more</a>.</p>

<h2 id="container-resolution"><a class="dashAnchor" name="//apple_ref/cpp/Section/Container%20Resolution"></a>Container Resolution</h2>

<p>You are not limited to defining a function for your routes. In Slim there are a few different ways to define your route action functions.</p>

<p>In addition to a function, you may use:
 - An invokable class
 - <code class="highlighter-rouge">Class:method</code></p>

<p>This function is enabled by Slim’s Callable Resolver Class. It translates a string entry into a function call.
Example:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app-&gt;get('/home', '\HomeController:home');</code></pre></figure>

<p>In this code above we are defining a <code class="highlighter-rouge">/home</code> route and telling Slim to execute the <code class="highlighter-rouge">home()</code> method on the <code class="highlighter-rouge">\HomeController</code> class.</p>

<p>Slim first looks for an entry of <code class="highlighter-rouge">\HomeController</code> in the container, if it’s found it will use that instance otherwise it will call it’s constructor with the container as the first argument. Once an instance of the class is created it will then call the specified method using whatever Strategy you have defined.</p>

<p>Alternatively, you can use an invokable class, such as:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">class MyAction {
   protected $ci;
   //Constructor
   public function __construct(ContainerInterface $ci) {
       $this-&gt;ci = $ci;
   }
   
   public function __invoke($request, $response, $args) {
        //your code
        //to access items in the container... $this-&gt;ci-&gt;get('');
   }
}</code></pre></figure>

<p>You can use this class like so.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app-&gt;get('/home', '\MyAction');</code></pre></figure>

<p>In a more traditional MVC approach you can construct controllers with many actions instead of an invokable class which only handles one action.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">class MyController {
   protected $ci;
   //Constructor
   public function __construct(ContainerInterface $ci) {
       $this-&gt;ci = $ci;
   }
   
   public function method1($request, $response, $args) {
        //your code
        //to access items in the container... $this-&gt;ci-&gt;get('');
   }
   
   public function method2($request, $response, $args) {
        //your code
        //to access items in the container... $this-&gt;ci-&gt;get('');
   }
      
   public function method3($request, $response, $args) {
        //your code
        //to access items in the container... $this-&gt;ci-&gt;get('');
   }
}</code></pre></figure>

<p>You can use your controller methods like so.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app-&gt;get('/method1', '\MyController:method1');
$app-&gt;get('/method2', '\MyController:method2');
$app-&gt;get('/method3', '\MyController:method3');</code></pre></figure>



                <nav>
                    <ul class="nav pager">
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                
                                    
                                        <li class="previous">
                                            <a href="response.html" rel="prev"><i class="fa fa-arrow-left"></i> <small>The Response: </small> Overview</a>
                                        </li>
                                    
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                

                                
                                    <li class="next">
                                        <a href="../handlers/error.html" rel="next"><small>Error Handling: </small> Error Handlers <i class="fa fa-arrow-right"></i></a>
                                    </li>
                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                    </ul>
                </nav>
            </div>
        </div>

        <footer class="site-footer">
            <p>
                Created and maintained by <br/>
                <a href="http://joshlockhart.com/">Josh Lockhart</a>,
                <a href="http://www.silentworks.co.uk/" target="_blank">Andrew Smith</a>,
                <a href="http://akrabat.com/" target="_blank">Rob Allen</a>, and the
                <a href="https://github.com/orgs/slimphp/people" target="_blank">Slim Framework Team</a>
            </p>
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post" style="margin: 0; padding-top: 20px" target="_blank">
                <input name="cmd" type="hidden" value="_s-xclick"/>
                <input name="hosted_button_id" type="hidden" value="9YRVXHRZT6H3L"/>
                <input alt="PayPal - The safer, easier way to pay online!" border="0" name="submit" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" type="image"/>
                <img alt="" border="0" height="1" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1"/>
            </form>
        </footer>
    </div>
</div>
        
        
        
        
        
        
    




</body><!-- Mirrored from www.slimframework.com/docs/objects/router.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 21 Sep 2016 20:42:43 GMT --></html>