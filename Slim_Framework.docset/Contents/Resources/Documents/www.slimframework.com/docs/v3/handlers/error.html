<!DOCTYPE html>
<html lang="en"><!-- Mirrored from www.slimframework.com/docs/v3/handlers/error.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jun 2019 12:43:44 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport"/>
        <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
        <title>System Error Handler - Slim Framework</title>
        <meta content="" name="description"/>
        <meta content="index, follow" name="robots"/>
        <meta content="System Error Handler" property="og:title"/>
        <meta content="Slim Framework" property="og:site_name"/>
        <meta content="error.html" property="og:url"/>
        <meta content="" property="og:description"/>
        <meta content="website" property="og:type"/>
        <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
        <link href="../../../assets/css/all.css" rel="stylesheet"/>
        <link href="../../../assets/images/favicon.png" rel="shortcut icon"/>
        <link href="../../../../maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
        
        
        
    </head>
    <body style="padding-top: 5em">
        

<div class="wrapper docs">
    <div class="container-fluid">
        

        <div class="row">
            

            <div class="col-md-8 docs-content">
                <h1 class="page-header"><a class="dashAnchor" name="//apple_ref/cpp/Section/System%20Error%20Handler"></a>System Error Handler</h1>
                <div class="edit-panel" style="margin: 0 0 1em 0;">
                    <a class="btn btn-default btn-sm" href="https://github.com/slimphp/Slim-Website/tree/gh-pages/docs/v3/handlers/error.md" role="button" target="_blank"><i class="fa fa-github"></i> Edit This Page</a>
                    
                </div>
                <p>Things go wrong. You can’t predict errors, but you can anticipate them. Each Slim Framework application has an error handler that receives all uncaught PHP exceptions. This error handler also receives the current HTTP request and response objects, too. The error handler must prepare and return an appropriate Response object to be returned to the HTTP client.</p>

<h2 id="default-error-handler"><a class="dashAnchor" name="//apple_ref/cpp/Section/Default%20error%20handler"></a>Default error handler</h2>

<p>The default error handler is very basic. It sets the Response status code to <code class="highlighter-rouge">500</code>, it sets the Response content type to <code class="highlighter-rouge">text/html</code>, and appends a generic error message into the Response body.</p>

<p>This is <em>probably</em> not appropriate for production applications. You are strongly encouraged to implement your own Slim application error handler.</p>

<p>The default error handler can also include detailed error diagnostic information. To enable this you need to set the <code class="highlighter-rouge">displayErrorDetails</code> setting to true:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$configuration</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'settings'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'displayErrorDetails'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">];</span>
<span class="nv">$c</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Slim\Container</span><span class="p">(</span><span class="nv">$configuration</span><span class="p">);</span>
<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Slim\App</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="custom-error-handler"><a class="dashAnchor" name="//apple_ref/cpp/Section/Custom%20error%20handler"></a>Custom error handler</h2>

<p>A Slim Framework application’s error handler is a Pimple service. You can substitute your own error handler by defining a custom Pimple factory method with the application container.</p>

<p>There are two ways to inject handlers:</p>

<h3 id="pre-app"><a class="dashAnchor" name="//apple_ref/cpp/Section/Pre%20App"></a>Pre App</h3>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$c</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Slim\Container</span><span class="p">();</span>
<span class="nv">$c</span><span class="p">[</span><span class="s1">'errorHandler'</span><span class="p">]</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$c</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="nv">$response</span><span class="p">,</span> <span class="nv">$exception</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$c</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">withStatus</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">withHeader</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">,</span> <span class="s1">'text/html'</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">write</span><span class="p">(</span><span class="s1">'Something went wrong!'</span><span class="p">);</span>
    <span class="p">};</span>
<span class="p">};</span>
<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Slim\App</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="post-app"><a class="dashAnchor" name="//apple_ref/cpp/Section/Post%20App"></a>Post App</h3>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Slim\App</span><span class="p">();</span>
<span class="nv">$c</span> <span class="o">=</span> <span class="nv">$app</span><span class="o">-&gt;</span><span class="na">getContainer</span><span class="p">();</span>
<span class="nv">$c</span><span class="p">[</span><span class="s1">'errorHandler'</span><span class="p">]</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$c</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="nv">$response</span><span class="p">,</span> <span class="nv">$exception</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$c</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">withStatus</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">withHeader</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">,</span> <span class="s1">'text/html'</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">write</span><span class="p">(</span><span class="s1">'Something went wrong!'</span><span class="p">);</span>
    <span class="p">};</span>
<span class="p">};</span>
</code></pre></div></div>

<p>In this example, we define a new <code class="highlighter-rouge">errorHandler</code> factory that returns a callable. The returned callable accepts three arguments:</p>

<ol>
  <li>A <code class="highlighter-rouge">\Psr\Http\Message\ServerRequestInterface</code> instance</li>
  <li>A <code class="highlighter-rouge">\Psr\Http\Message\ResponseInterface</code> instance</li>
  <li>A <code class="highlighter-rouge">\Exception</code> instance</li>
</ol>

<p>The callable <strong>MUST</strong> return a new <code class="highlighter-rouge">\Psr\Http\Message\ResponseInterface</code> instance as is appropriate for the given exception.</p>

<h3 id="class-based-error-handler"><a class="dashAnchor" name="//apple_ref/cpp/Section/Class-based%20error%20handler"></a>Class-based error handler</h3>

<p>Error handlers may also be defined as an invokable class.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CustomHandler</span> <span class="p">{</span>
   <span class="k">public</span> <span class="k">function</span> <span class="nf">__invoke</span><span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="nv">$response</span><span class="p">,</span> <span class="nv">$exception</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$response</span>
            <span class="o">-&gt;</span><span class="na">withStatus</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">withHeader</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">,</span> <span class="s1">'text/html'</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">write</span><span class="p">(</span><span class="s1">'Something went wrong!'</span><span class="p">);</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>and attached like so:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Slim\App</span><span class="p">();</span>
<span class="nv">$c</span> <span class="o">=</span> <span class="nv">$app</span><span class="o">-&gt;</span><span class="na">getContainer</span><span class="p">();</span>
<span class="nv">$c</span><span class="p">[</span><span class="s1">'errorHandler'</span><span class="p">]</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$c</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">CustomHandler</span><span class="p">();</span>
<span class="p">};</span>
</code></pre></div></div>

<p>This allows us to define more sophisticated handlers or extend/override the
built-in <code class="highlighter-rouge">Slim\Handlers\*</code> classes.</p>

<h3 id="handling-other-errors"><a class="dashAnchor" name="//apple_ref/cpp/Section/Handling%20other%20errors"></a>Handling other errors</h3>

<p><strong>Please note</strong>: The following four types of exceptions will not be handled by a custom <code class="highlighter-rouge">errorHandler</code>:</p>

<ul>
  <li><code class="highlighter-rouge">Slim\Exception\MethodNotAllowedException</code>: This can be handled via a custom <a href="not-allowed.html"><code class="highlighter-rouge">notAllowedHandler</code></a>.</li>
  <li><code class="highlighter-rouge">Slim\Exception\NotFoundException</code>: This can be handled via a custom <a href="not-found.html"><code class="highlighter-rouge">notFoundHandler</code></a>.</li>
  <li>Runtime PHP errors (PHP 7+ only): This can be handled via a custom <a href="php-error.html"><code class="highlighter-rouge">phpErrorHandler</code></a>.</li>
  <li><code class="highlighter-rouge">Slim\Exception\SlimException</code>: This type of exception is internal to Slim, and its handling cannot be overridden.</li>
</ul>

<h3 id="disabling"><a class="dashAnchor" name="//apple_ref/cpp/Section/Disabling"></a>Disabling</h3>

<p>To completely disable Slim’s error handling, simply remove the error handler from the container:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">unset</span><span class="p">(</span><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">getContainer</span><span class="p">()[</span><span class="s1">'errorHandler'</span><span class="p">]);</span>
<span class="nb">unset</span><span class="p">(</span><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">getContainer</span><span class="p">()[</span><span class="s1">'phpErrorHandler'</span><span class="p">]);</span>
</code></pre></div></div>

<p>You are now responsible for handling any exceptions that occur in your application as they will not be handled by Slim.</p>


                <nav>
                    <ul class="nav pager">
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                
                                    
                                        <li class="previous">
                                            <a href="../objects/router.html" rel="prev"><i class="fa fa-arrow-left"></i> <small>Routing: </small> Overview</a>
                                        </li>
                                    
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                
                                    <li class="next">
                                        <a href="not-found.html" rel="next"><small>Error Handling: </small> 404 Not Found <i class="fa fa-arrow-right"></i></a>
                                    </li>
                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                    </ul>
                </nav>
            </div>
        </div>

        <footer class="site-footer">
            <p>
                Created and maintained by <br/>
                <a href="http://joshlockhart.com/">Josh Lockhart</a>,
                <a href="http://www.silentworks.co.uk/" target="_blank">Andrew Smith</a>,
                <a href="http://akrabat.com/" target="_blank">Rob Allen</a>, and the
                <a href="https://github.com/orgs/slimphp/people" target="_blank">Slim Framework Team</a>
            </p>
            <a alt="Donate with PayPal" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=HNUWP9UUGC7L4">Donate with PayPal</a>
        </footer>
    </div>
</div>
        
        
        
        
            
            
        
        
    




</body><!-- Mirrored from www.slimframework.com/docs/v3/handlers/error.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jun 2019 12:43:44 GMT --></html>