<!DOCTYPE html>
<html lang="en"><!-- Mirrored from www.slimframework.com/docs/features/csrf.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 21 Sep 2016 20:42:43 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport"/>
        <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
        <title>CSRF Protection - Slim Framework</title>
        <meta content="" name="description"/>
        <meta content="index, follow" name="robots"/>
        <meta content="CSRF Protection" property="og:title"/>
        <meta content="Slim Framework" property="og:site_name"/>
        <meta content="csrf.html" property="og:url"/>
        <meta content="" property="og:description"/>
        <meta content="website" property="og:type"/>
        <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
        <link href="../../assets/css/all.css" rel="stylesheet"/>
        <link href="../../assets/images/favicon.png" rel="shortcut icon"/>
        <link href="../../../maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet"/>
        
        
        
    </head>
    <body style="padding-top: 5em">
        

<div class="wrapper docs">
    <div class="container-fluid">
        

        <div class="row">
            

            <div class="col-md-8 docs-content">
                <h1 class="page-header"><a class="dashAnchor" name="//apple_ref/cpp/Section/CSRF%20Protection"></a>CSRF Protection</h1>
                <div class="edit-panel" style="margin: 0 0 1em 0;">
                    <a class="btn btn-default btn-xs" href="https://github.com/slimphp/Slim-Website/tree/gh-pages/docs/features/csrf.md" target="_blank"><i class="fa fa-github"></i> Edit This Page</a>
                </div>
                <p>Slim 3 uses the optional standalone <a href="https://github.com/slimphp/Slim-Csrf">slimphp/Slim-Csrf</a>
PHP component to protect your application from CSRF (cross-site request forgery).
This component generates a unique token per request that validates subsequent
POST requests from client-side HTML forms.</p>

<h2 id="installation"><a class="dashAnchor" name="//apple_ref/cpp/Section/Installation"></a>Installation</h2>

<p>Execute this bash command from your project’s root directory:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">composer require slim/csrf</code></pre></figure>

<h2 id="usage"><a class="dashAnchor" name="//apple_ref/cpp/Section/Usage"></a>Usage</h2>

<p>The <code class="highlighter-rouge">slimphp/Slim-Csrf</code> component contains an application middleware. Add it
to your application like this:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">// Add middleware to the application
$app = new \Slim\App;
$app-&gt;add(new \Slim\Csrf\Guard);

// Create your application routes...

// Run application
$app-&gt;run();</code></pre></figure>

<h2 id="fetch-the-csrf-token-name-and-value"><a class="dashAnchor" name="//apple_ref/cpp/Section/Fetch%20the%20CSRF%20token%20name%20and%20value"></a>Fetch the CSRF token name and value</h2>

<p>The latest CSRF token’s name and value are available as attributes on the
PSR7 request object. The CSRF token name and value are unique for each request.
You can fetch the current CSRF token name and value like this.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">$app-&gt;get('/foo', function ($req, $res, $args) {
    // Fetch CSRF token name and value
    $name = $req-&gt;getAttribute('csrf_name');
    $value = $req-&gt;getAttribute('csrf_value');

    // TODO: Render template with HTML form and CSRF token hidden field
});</code></pre></figure>

<p>You should pass the CSRF token name and value to the template so they
may be submitted with HTML form POST requests. They are often stored as a hidden
field with HTML forms.</p>


                <nav>
                    <ul class="nav pager">
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                
                                    
                                        <li class="previous">
                                            <a href="caching.html" rel="prev"><i class="fa fa-arrow-left"></i> <small>Add Ons: </small> HTTP Caching</a>
                                        </li>
                                    
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                
                                    <li class="next">
                                        <a href="flash.html" rel="next"><small>Add Ons: </small> Flash Messages <i class="fa fa-arrow-right"></i></a>
                                    </li>
                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                    </ul>
                </nav>
            </div>
        </div>

        <footer class="site-footer">
            <p>
                Created and maintained by <br/>
                <a href="http://joshlockhart.com/">Josh Lockhart</a>,
                <a href="http://www.silentworks.co.uk/" target="_blank">Andrew Smith</a>,
                <a href="http://akrabat.com/" target="_blank">Rob Allen</a>, and the
                <a href="https://github.com/orgs/slimphp/people" target="_blank">Slim Framework Team</a>
            </p>
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post" style="margin: 0; padding-top: 20px" target="_blank">
                <input name="cmd" type="hidden" value="_s-xclick"/>
                <input name="hosted_button_id" type="hidden" value="9YRVXHRZT6H3L"/>
                <input alt="PayPal - The safer, easier way to pay online!" border="0" name="submit" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" type="image"/>
                <img alt="" border="0" height="1" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1"/>
            </form>
        </footer>
    </div>
</div>
        
        
        
        
        
        
    




</body><!-- Mirrored from www.slimframework.com/docs/features/csrf.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 21 Sep 2016 20:42:43 GMT --></html>